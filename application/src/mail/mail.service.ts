import { Injectable } from '@nestjs/common';
import { MailerService } from '@nestjs-modules/mailer';
import { ConfigService } from '@nestjs/config';

@Injectable()
export class MailService {
    constructor(private mailerService: MailerService,private configService: ConfigService) {}
    async sendWarningMail(data){
        await this.mailerService.sendMail({
            from:this.configService.get('mailAccount').user,
            to: data['mail'],
            // from: '"Support Team" <support@example.com>', // override default from
            subject: 'Traffic Warning',
            template: './warning', // `.hbs` extension is appended automatically
            context: { // ✏️ filling curly brackets with content
                username: data['username'],
                source: data['sourceIP'],
                dest: data['destIP']
            },
          });
        console.log('sent mail')
    }
}
